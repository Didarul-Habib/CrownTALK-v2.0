/* =========================================================
   CrownTALK – Generate button (theme aware, matches HTML)
   Uses: --btn-base, --btn-edge, --btn-glow (RGB for glow)
   HTML target: <button id="generateBtn" class="btn"> … </button>
========================================================= */

.btn {
  --radius: 9999px;
  --ease: .28s cubic-bezier(.2,.8,.2,1);

  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 10px;

  padding: 10px 18px;
  border: 0;
  border-radius: var(--radius);
  background: transparent;
  cursor: pointer;

  font: 700 14px/1 system-ui, -apple-system, Segoe UI, Roboto, "SF Pro Text", sans-serif;
  letter-spacing: .02em;
  color: #fff;

  transform-origin: center;
  transition: transform var(--ease), filter var(--ease), box-shadow var(--ease), background var(--ease);
}

/* glossy shell driven by theme vars */
.btn::before{
  content:"";
  position:absolute; inset:0;
  border-radius: var(--radius);
  background:
    radial-gradient(120% 160% at 50% -40%, rgba(var(--btn-glow), .26), transparent 55%),
    linear-gradient(180deg,
      color-mix(in oklab, var(--btn-base) 92%, #fff 8%),
      var(--btn-edge)
    );
  box-shadow:
    0 0 0 1px rgba(var(--btn-glow), .55) inset,
    0 8px 24px rgba(var(--btn-glow), .28),
    0 1px 0 rgba(255,255,255,.18) inset;
  z-index: 0;
  transition: box-shadow var(--ease), filter var(--ease), background var(--ease);
}

/* sheen on hover */
.btn::after{
  content:"";
  position:absolute; inset:0;
  border-radius: var(--radius);
  pointer-events:none;
  opacity: 0;
  background:
    radial-gradient(70% 120% at 50% 0%,
      color-mix(in oklab, var(--btn-base) 35%, white 65%) 0%,
      transparent 55%),
    radial-gradient(120% 160% at 10% 100%,
      color-mix(in oklab, rgb(var(--btn-glow)) 35%, white 65%) 0%,
      transparent 60%);
  transition: opacity var(--ease), filter var(--ease);
  z-index: 1;
}

/* rotating dotted halo INSIDE the pill border */
.btn-wrapper{ position:relative; display:inline-flex; }
.btn-wrapper::before{
  content:"";
  position:absolute; inset:-1px;
  border-radius: 9999px;
  pointer-events:none;

  /* ring drawn with conic + masked to the edge */
  --angle: 0deg;
  padding: 2px; /* ring thickness */
  background:
    conic-gradient(from var(--angle),
      color-mix(in oklab, var(--btn-base) 85%, white 15%) 0 12deg,
      transparent 12deg 360deg);
  -webkit-mask:
    radial-gradient(farthest-side, transparent calc(100% - 2px), #000 calc(100% - 2px));
          mask:
    radial-gradient(farthest-side, transparent calc(100% - 2px), #000 calc(100% - 2px));
  filter: drop-shadow(0 0 8px color-mix(in oklab, rgb(var(--btn-glow)) 55%, transparent));
  animation: btn-orbit 2.4s linear infinite;
}
@keyframes btn-orbit { to { --angle: 360deg; } }

/* icon (keep original element size) */
.btn-svg{
  width: 1.75rem;
  height: 1.75rem;
  display: block;
  flex: 0 0 auto;
  stroke: #e8ecff;
  fill: none;
  stroke-width: 1.5;
  filter: drop-shadow(0 0 4px rgba(var(--btn-glow), .45));
  transition: transform .25s ease;
}
.btn:hover .btn-svg{ transform: rotate(-8deg) scale(1.03); }

/* text swap (Generate -> Generating) */
.txt-wrapper{ position:relative; display:grid; overflow:hidden; }
.txt-1, .txt-2{
  display:inline-block;
  white-space:nowrap;
  transition: transform .35s cubic-bezier(.2,.8,.2,1), opacity .25s ease;
}
body.is-generating .txt-1{ transform: translateY(-120%); opacity:0; }
body.is-generating .txt-2{ transform: translateY(-100%); opacity:1; }
.txt-2{ transform: translateY(0); opacity:0; }

/* hover/active/focus/disabled */
.btn:hover:not(:disabled){ transform: translateY(-1px); }
.btn:hover::after{ opacity:1; }
.btn:active:not(:disabled){ transform: translateY(0); filter: saturate(1.05); }
.btn:focus-visible{
  outline:none;
  box-shadow:
    0 0 0 2px rgba(255,255,255,.85),
    0 0 0 5px rgba(var(--btn-glow), .45);
}
.btn:disabled{ opacity:.55; cursor:default; filter: grayscale(.15); }

/* generating pulse (add .is-generating on <body> when running) */
body.is-generating .btn::before{
  animation: gen-pulse 1.35s ease-in-out infinite;
}
@keyframes gen-pulse{
  0%,100%{ box-shadow:
    0 0 0 1px rgba(var(--btn-glow), .55) inset,
    0 8px 24px rgba(var(--btn-glow), .28),
    0 1px 0 rgba(255,255,255,.18) inset; }
  50%{ box-shadow:
    0 0 0 1px rgba(var(--btn-glow), .75) inset,
    0 12px 32px rgba(var(--btn-glow), .38),
    0 1px 0 rgba(255,255,255,.22) inset; }
}
