/* =========================================================
   CrownTALK – Generate Button (Uiverse "mean-bird-62" adapted)
   Size-tuned to avoid overlap; hover scale reduced
========================================================= */

.btn-wrapper{
  display:inline-block;
  position:relative;
  /* add a little breathing room from Cancel */
  margin-right: .75rem;
}

/* Core button */
.btn{
  --border_radius: 9999px;
  --transition: .28s cubic-bezier(.2,.8,.2,1);
  --edge: var(--btn-edge, #4c1d95);
  --base: var(--btn-base, #7c3aed);
  --glow: rgb(var(--btn-glow, 167,139,250));

  position: relative;
  display: inline-flex;
  align-items: center;
  gap: .45rem;

  /* ↓ smaller overall size */
  padding: .8rem 1.25rem;
  background: transparent;
  border: 0;
  border-radius: var(--border_radius);
  cursor: pointer;

  transform-origin: center;
  /* ↓ softer hover scale (from .06 → .04) */
  transform: scale(calc(1 + (var(--active, 0) * .04)));
  transition: transform var(--transition), filter var(--transition);
  -webkit-tap-highlight-color: transparent;
}

.btn:disabled{ opacity:.6; cursor: default; }

/* inner dark body / edge + subtle elevation */
.btn::before{
  content:"";
  position:absolute; inset:0;
  border-radius: var(--border_radius);
  background: var(--edge);
  box-shadow:
    inset 0 .5px rgba(255,255,255,.28),
    inset 0 -1px 2px rgba(0,0,0,.8),
    0 6px 18px rgba(0,0,0,.55),
    0 0 0 calc(var(--active, 0) * .375rem) color-mix(in oklab, var(--base) 80%, transparent);
  transition: all var(--transition);
  z-index: 0;
}

/* glow film that fades in on hover/focus */
.btn::after{
  content:"";
  position:absolute; inset:0;
  border-radius: var(--border_radius);
  background:
    radial-gradient(120% 120% at 80% 0%,
      color-mix(in oklab, var(--base) 70%, white 0%) 0%, transparent 50%),
    radial-gradient(140% 140% at 10% 100%,
      color-mix(in oklab, var(--base) 62%, black 0%) 0%, transparent 50%);
  opacity: var(--active, 0);
  transition: opacity var(--transition);
  z-index: 2;
}

.btn:is(:hover,:focus-visible){ --active: 1; }
.btn:active{ transform: scale(1); }

/* animated dotted border sweep */
.btn .dots_border{
  --size_border: calc(100% + 2px);
  position:absolute; inset:0;
  width: var(--size_border);
  height: var(--size_border);
  left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  border-radius: var(--border_radius);
  overflow: hidden;
  z-index: -1;
}
.btn .dots_border::before{
  content:"";
  position:absolute;
  top:30%; left:50%;
  transform: translate(-50%,-50%) rotate(0deg);
  transform-origin: left;
  width: 100%;
  height: 2rem;
  background: #fff;
  -webkit-mask: linear-gradient(transparent 0%, #fff 120%);
          mask: linear-gradient(transparent 0%, #fff 120%);
  opacity:.12;
  animation: btn-rotate 2s linear infinite;
}
@keyframes btn-rotate { to { transform: translate(-50%,-50%) rotate(360deg); } }

/* icon & label layer */
.btn .sparkle{
  position: relative;
  z-index: 10;
  /* ↓ smaller icon (from 1.75rem → 1.35rem) */
  width: 1.35rem; height: 1.35rem;
  flex: 0 0 auto;
}
.btn .sparkle .path{
  fill: currentColor;
  stroke: currentColor;
  transform-origin: center;
}

/* subtle twinkle sequence on hover */
.btn:is(:hover,:focus-visible) .sparkle .path{ animation: btn-path 1.5s linear .5s infinite; }
.btn .sparkle .path:nth-child(1){ --scale_path_1: 1.2; }
.btn .sparkle .path:nth-child(2){ --scale_path_2: 1.2; }
.btn .sparkle .path:nth-child(3){ --scale_path_3: 1.2; }
@keyframes btn-path{
  0%,34%,71%,100%{ transform: scale(1); }
  17%{ transform: scale(var(--scale_path_1,1)); }
  49%{ transform: scale(var(--scale_path_2,1)); }
  83%{ transform: scale(var(--scale_path_3,1)); }
}

/* text gradient reveal that intensifies on hover */
.btn .text_button{
  position: relative;
  z-index: 10;
  /* ↓ slightly smaller type (from 1rem → .95rem) */
  font-size: .95rem;
  font-weight: 600;
  letter-spacing: .2px;
  color: transparent;
  background-image: linear-gradient(90deg, #fff 0%, color-mix(in oklab, #fff 100%, transparent) 120%);
  -webkit-background-clip: text;
          background-clip: text;
}

/* default content vs generating content */
.btn .tb-2{ display:none; }
body.is-generating #generateBtn .tb-1{ display:none; }
body.is-generating #generateBtn .tb-2{ display:inline; }

/* set foreground to white on dark button body */
.btn{ color: #fff; }

/* focus ring */
.btn:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 3px color-mix(in oklab, var(--base) 40%, transparent),
    0 0 0 5px rgba(var(--btn-glow, 167,139,250), .35);
}

/* generating pulse */
body.is-generating #generateBtn::before{
  animation: gen-pulse 1.35s ease-in-out infinite;
}
@keyframes gen-pulse{
  0%,100%{
    box-shadow:
      inset 0 0 0 1px color-mix(in oklab, #fff 10%, var(--base) 90%),
      0 10px 28px rgba(var(--btn-glow, 167,139,250), .28),
      0 1px 0 rgba(255,255,255,.18) inset;
  }
  50%{
    box-shadow:
      inset 0 0 0 1px color-mix(in oklab, #fff 18%, var(--base) 82%),
      0 14px 36px rgba(var(--btn-glow, 167,139,250), .38),
      0 1px 0 rgba(255,255,255,.22) inset;
  }
}

/* Disabled state overrides animation */
.btn:disabled::before,
.btn:disabled::after,
.btn:disabled .dots_border::before{ animation: none; opacity: .6; }

/* Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce){
  .btn, .btn::before, .btn::after{ transition: none !important; }
  .btn .dots_border::before{ animation: none !important; }
  .btn .sparkle .path{ animation: none !important; }
}
