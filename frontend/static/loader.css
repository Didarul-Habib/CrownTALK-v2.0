/* =========================================================
   CrownTALK – Chip Loader Overlay (theme-friendly)
   Shows when: body.is-generating
   File: static/loader.css
========================================================= */

/* Hidden by default */
.chip-loader{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999; /* above cards & buttons */
  pointer-events: none; /* blocks click-through visually, but we’ll wrap inner to catch events */
}

/* Show while generating */
body.is-generating .chip-loader{
  display: flex;
  pointer-events: auto;
  background:
    radial-gradient(120% 120% at 50% 0%, rgba(0,0,0,.52), transparent 70%),
    rgba(0,0,0,.55);
  backdrop-filter: blur(2px);
}

/* Centering container */
.main-container{
  width: 100%;
  max-width: 1000px;
  padding: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Scales nicely on small screens */
.loader{
  width: 100%;
  max-width: 800px;
}
.loader svg{
  display: block;
  width: 100%;
  height: auto;
}

/* ====== Traces ====== */
.trace-bg{
  stroke: rgba(255,255,255,.08);
  stroke-width: 1.8;
  fill: none;
}

.trace-flow{
  stroke-width: 1.8;
  fill: none;
  stroke-dasharray: 40 400;
  stroke-dashoffset: 438;
  filter: drop-shadow(0 0 6px currentColor);
  animation: flow 3s cubic-bezier(0.5, 0, 0.9, 1) infinite;
}

/* Color lanes (kept from the original visual) */
.yellow { stroke: #ffea00; color: #ffea00; }
.blue   { stroke: #00ccff; color: #00ccff; }
.green  { stroke: #00ff15; color: #00ff15; }
.purple { stroke: #9900ff; color: #9900ff; }
.red    { stroke: #ff3300; color: #ff3300; }

@keyframes flow { to { stroke-dashoffset: 0; } }

/* ====== Chip bits (neutral, theme-safe) ====== */
text{
  font-weight: 600;
  letter-spacing: .3px;
}

/* Prefer reduced motion */
@media (prefers-reduced-motion: reduce){
  .trace-flow{ animation: none !important; }
  body.is-generating .chip-loader{ backdrop-filter: none; }
}

/* High-contrast tweak if user requests */
@media (prefers-contrast: more){
  .trace-bg{ stroke: rgba(255,255,255,.16); }
}

/* Prevent page jump when overlay appears */
html, body{ height: 100%; }
